# INTERNAL CRM SYSTEM — Full Technical Specification & Development Prompt

**Version:** 1.0
**Date:** February 2026
**Type:** Internal Business CRM
**Status:** Confidential

---

## ОБЩЕЕ ОПИСАНИЕ СИСТЕМЫ

Разработать внутреннюю CRM-систему для управления продажами, финансами, товарами, складами, заказами и аналитикой компании с несколькими филиалами. Система должна обеспечивать полный цикл управления бизнесом из единой платформы: от планирования продаж и контроля выполнения планов до складского учёта, финансового учёта и аналитики по каждому менеджеру, команде и филиалу.

---

## РОЛИ ПОЛЬЗОВАТЕЛЕЙ

### 1. Super Admin (Владелец / CEO)
- Полный доступ ко всем модулям и всем филиалам
- Управление всеми настройками системы
- Просмотр глобальной аналитики и финансов
- Создание и удаление пользователей любого уровня

### 2. Admin (Руководитель филиала / Начальник отдела)
- Управление своим филиалом и командой
- Создание планов продаж для менеджеров и команд
- Назначение бонусов и просмотр отчётов
- Управление расходами и кассой своего филиала
- Добавление и редактирование товаров

### 3. Manager (Менеджер по продажам)
- Создание и ведение заказов
- Просмотр своей личной аналитики: заработки, заказы, прогресс по плану
- Просмотр каталога товаров (без доступа к себестоимости)
- Работа с клиентской базой в рамках своих клиентов

### 4. Cashier (Кассир)
- Приём и проведение платежей
- Открытие и закрытие смен
- Формирование кассовых отчётов
- Сверка наличности

### 5. Accountant (Бухгалтер)
- Доступ к финансовому модулю
- Управление расходами и категориями
- Формирование финансовых отчётов
- Экспорт данных

### 6. Warehouse Manager (Кладовщик / Заведующий складом)
- Приёмка товаров на склад и оформление приходных накладных
- Отгрузка товаров со склада и оформление расходных накладных
- Проведение инвентаризации
- Перемещение товаров между складами
- Просмотр остатков и истории движения товаров на своём складе

---

## МОДУЛЬ 1: ОТДЕЛ ПРОДАЖ

### 1.1 Планы продаж

Админ может создавать планы продаж на разных уровнях:

**Типы планов:**
- **Недельный план** — краткосрочные цели на неделю. Админ задаёт целевую выручку или количество заказов для каждого менеджера или команды на конкретную неделю.
- **Месячный план** — агрегированные месячные цели. Могут автоматически рассчитываться из недельных планов или задаваться вручную.
- **Квартальный план** — стратегические цели для оценки результатов за квартал.
- **План команды** — коллективная цель для всей команды продаж или группы менеджеров в филиале. Если команда выполняет план — бонус распределяется между участниками.
- **Индивидуальный план** — персональные цели для каждого менеджера с конкретными KPI.

**Поля плана:**
- Название плана (например: "Неделя 12 — Команда Альфа")
- Период: неделя / месяц / квартал
- Дата начала и дата окончания
- Целевая выручка (в базовой валюте)
- Целевое количество заказов
- Назначение: ID менеджера или ID команды
- Филиал, в котором действует план
- Сумма бонуса за выполнение
- Порог бонуса — минимальный % выполнения плана для получения бонуса (например, 80%)

**Логика работы:**
- Админ создаёт план → назначает менеджеру или команде → система автоматически отслеживает прогресс в реальном времени → по окончании периода система рассчитывает результат и начисляет бонус, если порог достигнут.
- На дашборде плана показывается: прогресс-бар выполнения, текущая сумма vs цель, количество дней до конца периода, прогноз выполнения на основе текущей динамики.

### 1.2 Система бонусов

Система автоматически рассчитывает и начисляет бонусы по итогам плана:

- **Фиксированный бонус** — заданная сумма при достижении 100% плана (например: 5 000 за выполнение).
- **Процентный бонус** — процент от выручки сверх плана (например: 3% от суммы, превышающей целевую выручку).
- **Ступенчатый бонус** — прогрессивная шкала: 80% плана = минимальный бонус, 100% = стандартный бонус, 120%+ = премиальный бонус.
- **Командный бонус** — общий бонус при выполнении командного плана, распределяется между участниками пропорционально их вкладу или равными долями (настраивается админом).

Бонусы отображаются в личном кабинете менеджера и в финансовом модуле как отдельная статья расходов.

### 1.3 Отчёты по менеджерам

По каждому менеджеру формируется детальный отчёт:

- Количество созданных и завершённых заказов за период
- Выручка: факт vs план (сумма и процент выполнения)
- Средний чек (средняя сумма заказа)
- Конверсия заказов (созданные → завершённые)
- Количество привлечённых новых клиентов
- Процент возвратов и отмен
- Заработанные комиссии и начисленные бонусы
- Рейтинг в команде (позиция среди других менеджеров)
- Динамика показателей по неделям/месяцам (графики)

---

## МОДУЛЬ 2: ФИНАНСЫ И КАССА

### 2.1 Учёт доходов

- Все входящие платежи по заказам автоматически фиксируются в системе
- Доходы категоризируются по: филиалу, менеджеру, категории товара, способу оплаты
- Ежедневные, еженедельные и месячные сводки по выручке с анализом трендов
- Разделение на: оплаченные заказы, ожидающие оплаты, просроченные платежи

### 2.2 Учёт расходов

Админ вносит и категоризирует все расходы компании:

**Категории расходов:**
- **Постоянные расходы** — аренда, зарплаты, подписки, страхование
- **Переменные расходы** — закупка товара, упаковка, доставка
- **Маркетинг** — реклама, промоакции, SMM, создание контента
- **Операционные** — коммунальные, канцелярия, обслуживание оборудования
- **Бонусы и комиссии** — бонусы менеджерам, реферальные выплаты
- **Налоги и сборы** — налоговые платежи, банковские комиссии

**Поля расхода:**
- Дата, сумма, категория, подкатегория
- Описание/примечание
- Филиал (или "общие расходы компании")
- Кто внёс запись
- Прикреплённый документ (чек, накладная) — опционально
- Повторяющийся расход: да/нет (если да — автоматическое создание каждый месяц)

### 2.3 Касса (по каждому филиалу)

Каждый филиал имеет собственный кассовый модуль:

- **Баланс кассы** — отображение текущего остатка в реальном времени
- **Приход и расход** — каждая операция с обязательным описанием и категорией
- **Открытие/закрытие смены** — кассир фиксирует начальный остаток при открытии и конечный при закрытии. Система сверяет ожидаемый остаток с фактическим
- **Способы оплаты** — наличные, карта, банковский перевод, рассрочка
- **Ежедневный кассовый отчёт** — автоматически формируется при закрытии смены
- **Консолидированный отчёт** — Super Admin видит состояние касс всех филиалов в одном месте

### 2.4 Финансовый дашборд

Единая панель для Super Admin и бухгалтера:

- Общая выручка vs общие расходы = прибыль/убыток
- Денежный поток (cash flow) по периодам — график
- Дебиторская задолженность (неоплаченные заказы)
- Структура расходов по категориям — круговая диаграмма
- P&L (прибыль и убытки) по каждому филиалу отдельно
- Тренды: сравнение с прошлым месяцем, прошлым кварталом, прошлым годом

---

## МОДУЛЬ 3: ТОВАРЫ

### 3.1 Карточка товара

Каждый товар содержит следующие поля:

- **Название товара** — отображаемое имя
- **Артикул (SKU)** — уникальный код товара (автогенерация если не указан)
- **Категория** — для фильтрации и аналитики
- **Себестоимость** — закупочная цена (скрыта от менеджеров, видна только админу/бухгалтеру)
- **Цена продажи** — розничная цена для клиента
- **Доставка включена** — да/нет. Если нет — указывается отдельная стоимость доставки
- **Стоимость доставки** — отдельная сумма, если доставка не включена в цену
- **Процент менеджеру** — комиссия менеджера с каждой продажи данного товара (например: 5%)
- **Остаток на складе** — текущее количество
- **Порог минимального остатка** — при достижении система отправляет уведомление
- **Статус** — Активный / Неактивный / Нет в наличии
- **Изображения** — до 5 фотографий товара
- **Описание** — полное описание товара

### 3.2 Комбо-товары (наборы)

Помимо обычных товаров, в системе можно создавать комбо-товары — наборы из нескольких товаров, продаваемые как единая позиция.

**Поля комбо-товара:**
- **Название комбо** — отображаемое имя набора (например: "Набор для ухода Премиум", "Комплект 3 в 1")
- **Артикул комбо (SKU)** — уникальный код набора
- **Состав комбо** — список товаров, входящих в набор, с указанием количества каждого:
  - Товар 1 — название, количество в наборе
  - Товар 2 — название, количество в наборе
  - Товар N — название, количество в наборе
- **Себестоимость комбо** — автоматически рассчитывается как сумма себестоимостей всех товаров в составе × их количество
- **Цена комбо** — цена продажи набора. Может быть задана вручную (обычно ниже суммы отдельных товаров, чтобы стимулировать покупку набора)
- **Экономия для клиента** — автоматически рассчитывается: сумма цен отдельных товаров минус цена комбо. Показывается клиенту как выгода
- **Процент менеджеру** — комиссия менеджера за продажу комбо (может отличаться от процентов на отдельные товары)
- **Доставка включена** — да/нет
- **Статус** — Активный / Неактивный
- **Изображение** — фото набора

**Логика работы комбо:**
- При продаже комбо со склада списывается каждый входящий товар в соответствующем количестве
- Если хотя бы одного товара из состава нет в наличии — комбо автоматически получает статус "Нет в наличии"
- В аналитике продажа комбо отображается и как общая продажа набора, и с разбивкой по входящим товарам
- Комбо можно редактировать: менять состав, цену, добавлять/убирать товары
- Маржа комбо = Цена комбо − Сумма себестоимостей всех товаров − Доставка − Комиссия менеджера

### 3.3 Операции с товарами

- **Добавить товар** — создание нового товара со всеми полями
- **Редактировать товар** — изменение любого поля. Все изменения цен логируются (кто, когда, старая цена → новая цена)
- **Удалить товар** — мягкое удаление (архивация). Товар остаётся в истории заказов, но скрывается из каталога
- **Дублировать товар** — клонирование для быстрого создания вариантов
- **Массовый импорт/экспорт** — загрузка/выгрузка через CSV/Excel
- **История цен** — журнал всех изменений цен для аудита

### 3.4 Автоматический расчёт маржи

Система автоматически рассчитывает и показывает:
- Валовая маржа = Цена продажи − Себестоимость
- Чистая маржа = Валовая маржа − Стоимость доставки − Комиссия менеджера
- Процент маржи = (Чистая маржа / Цена продажи) × 100

---

## МОДУЛЬ 4: ЗАКАЗЫ

### 4.1 Создание заказа

Менеджер создаёт заказ через форму:

**Поля заказа:**
- **Клиент** (обязательно) — выбрать существующего или создать нового
- **Товары** (обязательно) — выбрать товары с указанием количества
- **Адрес доставки** (если есть доставка)
- **Способ оплаты** (обязательно) — наличные / карта / перевод / рассрочка
- **Скидка** (опционально) — фиксированная сумма или процент
- **Примечание** (опционально) — внутренние заметки по заказу
- **Филиал** — автоматически по филиалу менеджера

### 4.2 Статусы заказа

Каждый заказ проходит через рабочий процесс:

1. **Новый** — заказ только создан, ожидает подтверждения
2. **Подтверждён** — заказ проверен, готов к обработке
3. **В обработке** — заказ комплектуется/подготавливается
4. **Отправлен** — заказ передан в доставку
5. **Доставлен** — заказ получен клиентом
6. **Завершён** — оплата подтверждена, заказ финализирован
7. **Отменён** — заказ отменён (обязательно указать причину)
8. **Возврат** — товар возвращён клиентом (указать причину и состояние товара)

Каждая смена статуса логируется: кто, когда, с какого на какой статус.

### 4.3 Автоматические расчёты при создании заказа

- Подитог = сумма всех товаров × количество
- Стоимость доставки (если применимо)
- Скидка (если применимо)
- Итоговая сумма = Подитог + Доставка − Скидка
- Комиссия менеджера = сумма (цена товара × количество × процент менеджера) по каждому товару
- Расчётная прибыль = Итоговая сумма − Себестоимость всех товаров − Доставка − Комиссия менеджера

---

## МОДУЛЬ 5: АНАЛИТИКА И ДАШБОРДЫ

### 5.1 Личная аналитика менеджера

Менеджер видит в своём кабинете:

- **Мои заработки** — общая сумма комиссий и бонусов за текущий период и историческая сводка
- **Мои заказы** — все заказы с суммой, статусом и начисленной комиссией
- **Прогресс по плану** — визуальный прогресс-бар: текущий результат vs цель плана
- **Мои клиенты** — список клиентов, закреплённых за менеджером
- **Рейтинг в команде** — позиция среди других менеджеров (лидерборд)
- **Общий оборот** — суммарная выручка по моим заказам
- **Динамика** — графики заработков и заказов по дням/неделям

### 5.2 Аналитика для Admin (уровень филиала/команды)

- **Общая выручка** — выручка филиала с сравнением по периодам
- **Эффективность команды** — процент выполнения планов каждого менеджера (таблица сравнения)
- **Топ товаров** — самые продаваемые товары по выручке и по количеству
- **Обзор расходов** — структура расходов с предупреждениями о превышении бюджета
- **Воронка заказов** — конверсия: новые → подтверждённые → завершённые
- **Денежный поток** — график доходов vs расходов во времени
- **Средний чек** — средняя сумма заказа по филиалу
- **Рейтинг менеджеров** — таблица лидеров с ключевыми метриками

### 5.3 Аналитика для Super Admin (глобальный уровень)

Всё, что доступно Admin, плюс:

- **Сравнение филиалов** — дашборд сравнения показателей всех филиалов
- **Общий P&L компании** — консолидированная прибыль и убытки
- **Тренды выручки** — динамика роста с метриками прироста
- **Оценка запасов** — стоимость остатков на складах всех филиалов
- **Lifetime Value клиентов** — средняя ценность клиента за всё время
- **ROI по менеджерам** — расходы на менеджера (зарплата + бонусы) vs принесённая выручка

---

## МОДУЛЬ 6: ФИЛИАЛЫ

### 6.1 Управление филиалами

- Добавление / редактирование / деактивация филиалов с полным адресом и контактами
- Назначение менеджеров и админов к конкретным филиалам
- Возможность задать специфические цены или доступность товаров для филиала (опциональные переопределения)
- Независимые кассы по каждому филиалу с консолидированной отчётностью
- Дашборд сравнения филиалов
- Перемещение остатков между филиалами с отслеживанием

---

## МОДУЛЬ 7: СКЛАДЫ

### 7.1 Управление складами

Система поддерживает несколько складов. Каждый склад может быть привязан к филиалу или быть центральным (общим).

**Карточка склада:**
- **Название склада** (например: "Центральный склад", "Склад Филиал-Юг", "Склад Бишкек-2")
- **Адрес** — физическое расположение склада
- **Привязка к филиалу** — к какому филиалу относится (или "Центральный" если общий)
- **Ответственное лицо** — кладовщик или менеджер склада
- **Тип склада** — Основной / Транзитный / Возвратный
- **Статус** — Активный / Неактивный

### 7.2 Приёмка товаров (Приход на склад)

Когда товар поступает на склад, создаётся приходная накладная:

**Поля приходной накладной:**
- **Номер накладной** — автоматическая нумерация
- **Дата приёмки**
- **Склад-получатель** — на какой склад поступает товар
- **Источник поступления** — Поставщик / Другой склад (перемещение) / Возврат от клиента
- **Поставщик** — если от поставщика: название, контакт (выбор из справочника или создание нового)
- **Склад-отправитель** — если перемещение между складами: откуда пришёл товар
- **Список товаров:**
  - Товар (выбор из каталога)
  - Количество
  - Закупочная цена (себестоимость) за единицу
  - Итого по позиции
- **Общая сумма накладной** — автоматически
- **Примечание** — комментарий к поставке
- **Прикреплённые документы** — скан накладной, счёт-фактура (опционально)
- **Кто принял** — автоматически (текущий пользователь)

**Логика приёмки:**
- После подтверждения приходной накладной остатки на складе-получателе автоматически увеличиваются
- Если это перемещение со другого склада — остатки на складе-отправителе автоматически уменьшаются
- Себестоимость товара может обновляться по последней закупочной цене или рассчитываться как средневзвешенная (настраивается в системе)
- Накладная после подтверждения не может быть удалена — только сторнирована (создаётся обратная операция)

### 7.3 Отгрузка товаров (Расход со склада)

Товар списывается со склада при:

- **Продажа (заказ)** — автоматическое списание при переводе заказа в статус "Подтверждён" или "В обработке" (настраивается). Система выбирает склад по привязке к филиалу менеджера или вручную
- **Перемещение на другой склад** — ручное создание расходной накладной на перемещение
- **Списание** — порча, брак, истечение срока годности (с указанием причины)
- **Возврат поставщику** — возврат товара поставщику

**Поля расходной накладной:**
- Номер накладной, дата
- Склад-отправитель
- Тип операции: Продажа / Перемещение / Списание / Возврат поставщику
- Склад-получатель (если перемещение)
- Номер заказа (если продажа)
- Список товаров с количеством
- Причина (если списание)
- Кто оформил

### 7.4 Остатки на складах

Центральный блок для контроля запасов:

**Таблица остатков:**
- Товар (название, артикул, фото)
- Остаток по каждому складу (в отдельных колонках)
- Общий остаток по всем складам (сумма)
- Себестоимость единицы
- Общая стоимость запаса (остаток × себестоимость)
- Статус наличия (В наличии / Мало / Нет в наличии)
- Дата последнего поступления
- Дата последней продажи

**Фильтры и поиск:**
- По складу (показать остатки конкретного склада)
- По категории товара
- По статусу (только "мало на складе", только "нет в наличии")
- По диапазону дат последнего движения
- Поиск по названию или артикулу

**Дополнительные функции остатков:**
- **Порог минимального остатка** — задаётся на уровне товара. При достижении система отправляет уведомление админу и кладовщику
- **Автозаказ** (опционально) — система формирует рекомендацию по закупке при достижении минимального порога, на основе средней скорости продаж
- **ABC-анализ** — автоматическая классификация товаров: A (высокооборотные, 80% выручки), B (средние, 15%), C (низкооборотные, 5%)

### 7.5 История движения товара

По каждому товару доступна полная история:

- Все приходы: дата, количество, откуда (поставщик/склад), закупочная цена, номер накладной
- Все расходы: дата, количество, куда (заказ/склад/списание), номер накладной
- Текущий остаток на каждый момент времени (графически)
- Оборачиваемость товара: среднее количество дней, за которое товар продаётся

### 7.6 Перемещение между складами

Полный процесс перемещения товара:

1. **Создание заявки на перемещение** — указывается: склад-отправитель, склад-получатель, список товаров с количеством, причина перемещения
2. **Подтверждение отправки** — кладовщик склада-отправителя подтверждает отгрузку. Товар переходит в статус "В пути" (остаток списывается с отправителя, но ещё не зачисляется получателю)
3. **Подтверждение приёмки** — кладовщик склада-получателя подтверждает получение. Остатки зачисляются. Если количество не совпадает — создаётся акт расхождения
4. **Логирование** — вся цепочка действий записывается: кто создал, кто отправил, кто принял, когда, какие расхождения

### 7.7 Инвентаризация

Периодическая сверка фактических остатков с системными:

- **Создание инвентаризации** — админ или кладовщик инициирует инвентаризацию по складу (полную или по категории)
- **Подсчёт** — кладовщик вводит фактическое количество каждого товара
- **Автоматическое сравнение** — система показывает расхождения: излишки и недостачи
- **Акт инвентаризации** — формируется документ с результатами
- **Корректировка остатков** — после утверждения акта система корректирует остатки (с записью в audit trail)

### 7.8 Аналитика складов

- **Общая стоимость запасов** — сумма (остаток × себестоимость) по всем складам
- **Оборачиваемость** — за сколько дней в среднем товар продаётся
- **Неликвидные товары** — товары без движения более N дней (настраивается)
- **Топ по движению** — самые часто перемещаемые товары
- **Прогноз дефицита** — на основе скорости продаж система прогнозирует, когда товар закончится
- **Сравнение складов** — загрузка и эффективность каждого склада

---

## МОДУЛЬ 8: КЛИЕНТЫ

### 8.1 Карточка клиента

- ФИО, телефон, email
- Адреса доставки (может быть несколько)
- Закреплённый менеджер
- Источник/канал привлечения (откуда узнал о компании)
- Общее количество заказов и сумма покупок за всё время
- Статус лояльности (Новый / Активный / VIP / Под угрозой / Потерянный)
- История заметок и комментариев

### 8.2 Функции модуля клиентов

- **Автоматическая сегментация** — система автоматически определяет статус клиента по активности
- **История заказов** — полная хронология всех заказов и взаимодействий
- **Обнаружение дублей** — предупреждение при создании клиента с совпадающим телефоном или email
- **Массовые уведомления** — рассылка SMS/сообщений по сегментам клиентов

---

## МОДУЛЬ 9: ДОПОЛНИТЕЛЬНЫЕ ФУНКЦИИ

### 9.1 Система уведомлений

Push-уведомления и уведомления внутри системы:
- Новый заказ назначен менеджеру
- Приближается дедлайн плана
- План выполнен (бонус начислен)
- Низкий остаток товара на складе
- Получен платёж
- Изменение статуса заказа
- Ежедневные/еженедельные дайджесты
- Напоминания о сменах

### 9.2 Журнал действий (Audit Trail)

Каждое действие в системе логируется: кто, что, когда, с какого устройства. Включает:
- Изменения заказов
- Редактирование цен
- Проведение платежей
- Изменение планов
- Входы в систему
- Попытки неавторизованного доступа

Логи неизменяемые, доступны только Super Admin.

### 9.3 Экспорт отчётов

Все отчёты могут быть выгружены в форматах PDF и Excel:
- Отчёты по продажам
- Финансовые отчёты
- Отчёты по остаткам
- Отчёты по менеджерам
- Клиентские списки с историей заказов

### 9.4 Мониторинг активности сотрудников

Админ может отслеживать:
- Время входа и продолжительность сессий менеджеров
- Количество созданных заказов в день
- Время отклика на запросы клиентов
- Оповещения о бездействии

### 9.5 Мультивалютность

Поддержка нескольких валют с настраиваемыми курсами обмена. Все отчёты можно просматривать в любой настроенной валюте.

### 9.6 Интеграции (будущее)

Запланированные точки интеграции:
- Telegram / WhatsApp — общение с клиентами
- Платёжные шлюзы — онлайн-оплата
- Бухгалтерское ПО — выгрузка данных
- API служб доставки — автоматическое отслеживание
- SMS-шлюз — отправка уведомлений

---

## ПРОМТ ДЛЯ РАЗРАБОТКИ (DEVELOPMENT PROMPT)

> Используй этот текст как промт для AI-разработчика или команды разработки.

---

**PROMPT:**

Разработай внутреннюю CRM веб-приложение со следующими модулями и требованиями:

**1. ОТДЕЛ ПРОДАЖ:**
Реализуй модуль управления продажами, где админ может создавать еженедельные, ежемесячные и квартальные планы продаж для отдельных менеджеров и команд. Каждый план содержит: целевую выручку, целевое количество заказов, привязку к филиалу и конфигурацию бонуса. Бонусы рассчитываются автоматически при выполнении плана (поддержка фиксированных, процентных и ступенчатых бонусов). По каждому менеджеру генерируются отчёты: количество завершённых заказов, выручка vs план, средний чек, заработанные комиссии, количество привлечённых клиентов и рейтинг в команде.

**2. ФИНАНСЫ И КАССА:**
Построй финансовый модуль, который отслеживает все доходы (автоматически из заказов) и все расходы (вносятся админом с категориями: постоянные, переменные, маркетинг, операционные, бонусы, налоги). Каждый филиал имеет независимую кассу с открытием/закрытием смен, сверкой наличности и поддержкой нескольких способов оплаты (наличные, карта, перевод, рассрочка). Обеспечь единый финансовый дашборд с отображением P&L, cash flow, дебиторской задолженности и структуры расходов по категориям.

**3. ТОВАРЫ И КОМБО:**
Создай полный каталог товаров с полями: название, артикул, категория, себестоимость (скрыта от менеджеров), цена продажи, включена ли доставка, стоимость доставки, процент комиссии менеджера, остаток на складе, порог минимального остатка, статус, изображения и описание. Поддержи операции: добавление, редактирование (с логированием изменений цен), мягкое удаление, дублирование, массовый импорт/экспорт. Автоматически рассчитывай валовую и чистую маржу. Реализуй комбо-товары (наборы): админ создаёт комбо из нескольких товаров с указанием количества каждого. Себестоимость комбо рассчитывается автоматически как сумма себестоимостей компонентов. Цена комбо задаётся вручную (обычно со скидкой). При продаже комбо со склада списывается каждый входящий товар. Если хотя бы одного компонента нет в наличии — комбо недоступно. В аналитике комбо отображается и как набор, и с разбивкой по товарам.

**4. ЗАКАЗЫ:**
Реализуй модуль заказов, где менеджеры создают заказы с выбором клиента, товаров с количеством, адресом доставки, способом оплаты, скидкой и примечаниями. Заказы проходят через статусы: Новый → Подтверждён → В обработке → Отправлен → Доставлен → Завершён (а также Отменён и Возврат). При создании заказа автоматически рассчитываются: итоговая сумма, стоимость доставки, скидка, комиссия менеджера и расчётная прибыль. Каждая смена статуса логируется.

**5. АНАЛИТИКА:**
Построй трёхуровневую систему аналитики. Менеджер видит: свои заработки (комиссии + бонусы), свои заказы, прогресс по плану, своих клиентов, рейтинг в команде, общий оборот. Админ видит: выручку филиала, эффективность команды, топ товаров, структуру расходов, воронку заказов, денежный поток. Super Admin видит всё вышеперечисленное плюс: сравнение филиалов, общий P&L компании, тренды выручки, оценку запасов, LTV клиентов, ROI по менеджерам.

**6. ФИЛИАЛЫ:**
Реализуй управление филиалами: создание, редактирование, деактивация. Привязка менеджеров и админов к филиалам. Независимые кассы с консолидированными отчётами. Возможность перемещения остатков между филиалами.

**7. СКЛАДЫ:**
Реализуй полноценный складской учёт с поддержкой нескольких складов (центральный, по филиалам, транзитный, возвратный). Приёмка товаров: создание приходных накладных с указанием поставщика или склада-отправителя, списка товаров, количества и закупочной цены. После подтверждения приходной накладной остатки автоматически обновляются. Отгрузка: автоматическое списание при продаже (по заказу), ручное при перемещении или списании. Перемещение между складами: заявка → подтверждение отправки (товар "в пути") → подтверждение приёмки (зачисление). При расхождениях формируется акт. Блок остатков: таблица с остатками по каждому складу и общим итогом, себестоимостью, статусом наличия, датами последнего движения. Фильтры по складу, категории, статусу. Порог минимального остатка с уведомлениями. Инвентаризация: создание, ввод фактических количеств, автосравнение с системными, формирование акта, корректировка остатков. История движения каждого товара: все приходы и расходы с датами, количествами и номерами накладных. Аналитика складов: общая стоимость запасов, оборачиваемость, неликвиды, прогноз дефицита, ABC-анализ.

**8. КЛИЕНТЫ:**
Создай модуль CRM клиентов с карточкой клиента (ФИО, телефон, email, адреса, менеджер, источник, история покупок, статус лояльности). Автоматическая сегментация по активности. Обнаружение дублей. Массовые рассылки по сегментам.

**9. ДОПОЛНИТЕЛЬНО:**
Система push-уведомлений, полный журнал действий (audit trail), экспорт отчётов в PDF/Excel, мониторинг активности сотрудников, мультивалютность, подготовка к интеграции с Telegram/WhatsApp, платёжными шлюзами и службами доставки.

**ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ:**
- Ролевой доступ: Super Admin, Admin, Manager, Cashier, Accountant, Warehouse Manager
- Адаптивный интерфейс (desktop + mobile)
- Все действия логируются в audit trail
- Мягкое удаление данных (архивация вместо удаления)
- Все финансовые операции с точностью до копейки
- Защита данных: шифрование, HTTPS, хеширование паролей
- API-first архитектура для будущих интеграций

---

*Конец документа*
